<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>IT Tycoon</title>
Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-areas:
Â  Â  Â  Â  Â  Â  Â  Â  "header header"
Â  Â  Â  Â  Â  Â  Â  Â  "tickets engineers"
Â  Â  Â  Â  Â  Â  Â  Â  "actions actions"
Â  Â  Â  Â  Â  Â  Â  Â  "progress progress";
Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr 1fr;
Â  Â  Â  Â  Â  Â  gap: 20px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  background-color: #e8f5e9; /* Changed to Light Green */
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  max-width: 1000px; /* Centering Change */
Â  Â  Â  Â  Â  Â  margin: 0 auto; /* Centering Change */
Â  Â  Â  Â  }
Â  Â  Â  Â  header {
Â  Â  Â  Â  Â  Â  grid-area: header;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #ddd;
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  h1, h2 {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  #stats {
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #27ae60;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  background-color: #ffffff;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #tickets { 
Â  Â  Â  Â  Â  Â  grid-area: tickets;
Â  Â  Â  Â  Â  Â  background-color: #fffac8; /* A nice light yellow */
Â  Â  Â  Â  Â  Â  border: 1px solid #f1c40f; 
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  #engineers { grid-area: engineers; }
Â  Â  Â  Â  #in-progress { grid-area: progress; }
Â  Â  Â  Â  #actions { grid-area: actions; text-align: center; }

Â  Â  Â  Â  .ticket, .engineer {
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  Â  Â  background-color: #ffffff; /* Ensure inner tickets are white */
Â  Â  Â  Â  }
Â  Â  Â  Â  .ticket:hover, .engineer.idle:hover {
Â  Â  Â  Â  Â  Â  border-color: #3498db;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  .engineer.idle {
Â  Â  Â  Â  Â  Â  background-color: #e8f5e9; 
Â  Â  Â  Â  }
Â  Â  Â  Â  .engineer.working {
Â  Â  Â  Â  Â  Â  background-color: #fff8e1; 
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  opacity: 0.7;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* CUSTOM: Both selected ticket and engineer use the same light red/pink highlight */
Â  Â  Â  Â  .ticket.selected, .engineer.selected {
Â  Â  Â  Â  Â  Â  background-color: #f7cac9; /* Light Red/Pink for unified Selection */
Â  Â  Â  Â  Â  Â  border: 2px solid #e74c3c;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .progress-bar {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  background-color: #eee;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  height: 20px;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  .progress-fill {
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background-color: #2ecc71;
Â  Â  Â  Â  Â  Â  width: 0%;
Â  Â  Â  Â  Â  Â  transition: none; 
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Button Styling (Green Squares/Blocks) */
Â  Â  Â  Â  button {
Â  Â  Â  Â  Â  Â  width: 100%; 
Â  Â  Â  Â  Â  Â  padding: 12px 10px; 
Â  Â  Â  Â  Â  Â  background-color: #2ecc71; 
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: 2px solid #2ecc71; 
Â  Â  Â  Â  Â  Â  border-radius: 4px; 
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  Â  Â  transition: background-color 0.2s, border-color 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  button:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background-color: #27ad60; 
Â  Â  Â  Â  Â  Â  border-color: #27ad60;
Â  Â  Â  Â  }
Â  Â  Â  Â  button:disabled {
Â  Â  Â  Â  Â  Â  background-color: #cccccc;
Â  Â  Â  Â  Â  Â  border-color: #cccccc;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Hire button styling based on level for visual distinction */
Â  Â  Â  Â  .hire-button-1 { background-color: #2ecc71; border-color: #2ecc71;} 
Â  Â  Â  Â  .hire-button-2 { background-color: #f1c40f; border-color: #f1c40f; } 
Â  Â  Â  Â  .hire-button-3 { background-color: #e67e22; border-color: #e67e22; } 
Â  Â  Â  Â  .hire-button-1:hover:not(:disabled) { background-color: #27ad60; border-color: #27ad60; }
Â  Â  Â  Â  .hire-button-2:hover:not(:disabled) { background-color: #f39c12; border-color: #f39c12; }
Â  Â  Â  Â  .hire-button-3:hover:not(:disabled) { background-color: #d35400; border-color: #d35400; }

Â  Â  Â  Â  #assign-button {
Â  Â  Â  Â  Â  Â  background-color: #e74c3c; 
Â  Â  Â  Â  Â  Â  border-color: #e74c3c;
Â  Â  Â  Â  Â  Â  font-size: 1.3em;
Â  Â  Â  Â  Â  Â  width: 60%;
Â  Â  Â  Â  Â  Â  margin: 10px auto; 
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  Â  Â  #assign-button:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background-color: #c0392b;
Â  Â  Â  Â  Â  Â  border-color: #c0392b;
Â  Â  Â  Â  }
Â  Â  Â  Â  #new-ticket-btn {
Â  Â  Â  Â  Â  Â  background-color: #3498db;
Â  Â  Â  Â  Â  Â  border-color: #3498db;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  #new-ticket-btn:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background-color: #2980b9;
Â  Â  Â  Â  Â  Â  border-color: #2980b9;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* Style for the new control */
Â  Â  Â  Â  #ticket-speed-control {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  gap: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  padding: 5px 0;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #ddd;
Â  Â  Â  Â  }
Â  Â  Â  Â  #ticket-speed-control label {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 0.9em;
Â  Â  Â  Â  }
Â  Â  Â  Â  #ticket-speed-selector {
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  background-color: #ffffff;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <header>
Â  Â  Â  Â  <h1>My IT Company ðŸ“ˆ</h1>
Â  Â  Â  Â  <div id="stats">Money: $500 | Total Tickets Fixed: 0</div>
Â  Â  </header>

Â  Â  <div id="tickets" class="container">
Â  Â  Â  Â  <h2>Available Tickets</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="ticket-speed-control">
Â  Â  Â  Â  Â  Â  <label for="ticket-speed-selector">Auto-Generate Speed:</label>
Â  Â  Â  Â  Â  Â  <select id="ticket-speed-selector" onchange="updateTicketGenerationSpeed(this.value)">
Â  Â  Â  Â  Â  Â  Â  Â  <option value="20000">Slow (1 per 20s)</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="15000" selected>Medium (1 per 15s)</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="10000">Fast (1 per 10s)</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="5000">Crazy (1 per 5s)</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button id="new-ticket-btn">Generate New Ticket Instantly</button>
Â  Â  Â  Â  <div id="ticket-list"></div>
Â  Â  </div>

Â  Â  <div id="engineers" class="container">
Â  Â  Â  Â  <h2>Engineers</h2>
Â  Â  Â  Â  <div id="engineer-list"></div>
Â  Â  Â  Â  <button class="hire-button-1" onclick="attemptHire(1)">Hire Junior (Skill 1) - $50</button>
Â  Â  Â  Â  <button class="hire-button-2" onclick="attemptHire(2)">Hire Junior II (Skill 2) - $100</button>
Â  Â  Â  Â  <button class="hire-button-3" onclick="attemptHire(3)">Hire Mid-Level (Skill 3) - $150</button>
Â  Â  </div>

Â  Â  <div id="actions">
Â  Â  Â  Â  <button id="assign-button" onclick="assignSelectedWork()" disabled>Select Ticket & Engineer to Assign ðŸ‘·</button>
Â  Â  </div>

Â  Â  <div id="in-progress" class="container">
Â  Â  Â  Â  <h2>Tickets In Progress</h2>
Â  Â  Â  Â  <div id="progress-list"></div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // --- GAME STATE ---
Â  Â  Â  Â  let state = {
Â  Â  Â  Â  Â  Â  company: {
Â  Â  Â  Â  Â  Â  Â  Â  money: 500,Â 
Â  Â  Â  Â  Â  Â  Â  Â  totalTicketsFixed: 0,
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  engineers: [
Â  Â  Â  Â  Â  Â  Â  Â  { id: 1, name: "Alice", skill: 1, status: 'idle', ticketsFixed: 0, assignedTicket: null },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 2, name: "Bob", skill: 1, status: 'idle', ticketsFixed: 0, assignedTicket: null },
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  inProgressTickets: [],Â 
Â  Â  Â  Â  Â  Â  tickets: [],
Â  Â  Â  Â  Â  Â  nextTicketId: 1,
Â  Â  Â  Â  Â  Â  nextEngineerId: 3,
Â  Â  Â  Â  Â  Â  selectedTicket: null,
Â  Â  Â  Â  Â  Â  selectedEngineer: null
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- CONSTANTS ---
Â  Â  Â  Â  const TICKET_PAY_PER_STAR = 20; // Changed base pay logic for variable reward
Â  Â  Â  Â  const PROGRESS_TO_COMPLETE = 100;
Â  Â  Â  Â  const PROMOTION_THRESHOLD = 5;Â 
Â  Â  Â  Â  const HIRE_COSTS = { 1: 50, 2: 100, 3: 150 };Â 
Â  Â  Â  Â  const HOURLY_SALARIES = { 1: 10, 2: 15, 3: 20, 4: 25, 5: 30 };
Â  Â  Â  Â  const JUNIOR_ENGINEER_NAMES = ["Charlie", "Dana", "Eve", "Frank", "Grace", "Henry", "Ivy", "Jack"];
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Interval variables
Â  Â  Â  Â  let gameInterval;
Â  Â  Â  Â  let ticketInterval;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Rename elements for simplicity
Â  Â  Â  Â  const ticketListEl = document.getElementById('ticket-list');
Â  Â  Â  Â  const engineerListEl = document.getElementById('engineer-list');
Â  Â  Â  Â  const progressListEl = document.getElementById('progress-list');
Â  Â  Â  Â  const statsEl = document.getElementById('stats');
Â  Â  Â  Â  const newTicketBtn = document.getElementById('new-ticket-btn');
Â  Â  Â  Â  const assignBtn = document.getElementById('assign-button');Â 


Â  Â  Â  Â  // --- HELPER FUNCTIONS ---

Â  Â  Â  Â  function getEngineerTitle(skill) {
Â  Â  Â  Â  Â  Â  switch (skill) {
Â  Â  Â  Â  Â  Â  Â  Â  case 1: return 'Junior I';
Â  Â  Â  Â  Â  Â  Â  Â  case 2: return 'Junior II';
Â  Â  Â  Â  Â  Â  Â  Â  case 3: return 'Mid-Level';
Â  Â  Â  Â  Â  Â  Â  Â  case 4: return 'Senior';
Â  Â  Â  Â  Â  Â  Â  Â  case 5: return 'Principal';
Â  Â  Â  Â  Â  Â  Â  Â  default: return 'Trainee';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function getRandomName() {
Â  Â  Â  Â  Â  Â  const usedNames = state.engineers.map(e => e.name);
Â  Â  Â  Â  Â  Â  const availableNames = JUNIOR_ENGINEER_NAMES.filter(name => !usedNames.includes(name));
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return availableNames.length > 0
Â  Â  Â  Â  Â  Â  Â  Â  ? availableNames[Math.floor(Math.random() * availableNames.length)]
Â  Â  Â  Â  Â  Â  Â  Â  : `Engineer ${state.nextEngineerId}`;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /** Updates the visibility and text of the Assign button */
Â  Â  Â  Â  function updateAssignmentButton() {
Â  Â  Â  Â  Â  Â  const ticketSelected = state.selectedTicket !== null;
Â  Â  Â  Â  Â  Â  const engineerSelected = state.selectedEngineer !== null;

Â  Â  Â  Â  Â  Â  if (ticketSelected && engineerSelected) {
Â  Â  Â  Â  Â  Â  Â  Â  const engineer = state.engineers.find(e => e.id === state.selectedEngineer);
Â  Â  Â  Â  Â  Â  Â  Â  assignBtn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  assignBtn.textContent = `Assign Ticket #${state.selectedTicket} to ${engineer.name} ðŸ› ï¸`;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  assignBtn.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  assignBtn.textContent = 'Select Ticket & Engineer to Assign ðŸ‘·';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- GAME LOGIC ---

Â  Â  Â  Â  /** Generates a new random ticket */
Â  Â  Â  Â  function generateTicket() {
Â  Â  Â  Â  Â  Â  const complexity = Math.floor(Math.random() * 5) + 1; // 1 to 5
Â  Â  Â  Â  Â  Â  const newTicket = {
Â  Â  Â  Â  Â  Â  Â  Â  id: state.nextTicketId++,
Â  Â  Â  Â  Â  Â  Â  Â  complexity: complexity,
Â  Â  Â  Â  Â  Â  Â  Â  progress: 0,
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  state.tickets.push(newTicket);
Â  Â  Â  Â  Â  Â  renderTickets();
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Handles selecting a ticket (with toggle logic) */
Â  Â  Â  Â  function selectTicket(ticketId) {
Â  Â  Â  Â  Â  Â  state.selectedTicket = ticketId === state.selectedTicket ? null : ticketId; // Toggle selection
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  Â  Â  updateAssignmentButton(); // Update button state
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Handles selecting an engineer (with toggle logic) */
Â  Â  Â  Â  function selectEngineer(engineerId) {
Â  Â  Â  Â  Â  Â  const engineer = state.engineers.find(e => e.id === engineerId);
Â  Â  Â  Â  Â  Â  if (engineer.status === 'idle') {
Â  Â  Â  Â  Â  Â  Â  Â  state.selectedEngineer = engineerId === state.selectedEngineer ? null : engineerId; // Toggle selection
Â  Â  Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  Â  Â  Â  Â  updateAssignmentButton(); // Update button state
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  alert("This engineer is already working!");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Triggered ONLY by the new Assign button */
Â  Â  Â  Â  function assignSelectedWork() {
Â  Â  Â  Â  Â  Â  if (!state.selectedTicket || !state.selectedEngineer) return;

Â  Â  Â  Â  Â  Â  const ticketIndex = state.tickets.findIndex(t => t.id === state.selectedTicket);
Â  Â  Â  Â  Â  Â  const engineer = state.engineers.find(e => e.id === state.selectedEngineer);
Â  Â  Â  Â  Â  Â  const ticket = state.tickets[ticketIndex];

Â  Â  Â  Â  Â  Â  if (ticket && engineer && engineer.status === 'idle') {
Â  Â  Â  Â  Â  Â  Â  Â  // Assign
Â  Â  Â  Â  Â  Â  Â  Â  engineer.status = 'working';
Â  Â  Â  Â  Â  Â  Â  Â  engineer.assignedTicket = ticket.id;
Â  Â  Â  Â  Â  Â  Â  Â  ticket.engineerId = engineer.id;Â 
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Move ticket from 'available' to 'inProgress'
Â  Â  Â  Â  Â  Â  Â  Â  state.inProgressTickets.push(ticket);
Â  Â  Â  Â  Â  Â  Â  Â  state.tickets.splice(ticketIndex, 1);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Clear selections
Â  Â  Â  Â  Â  Â  Â  Â  state.selectedTicket = null;
Â  Â  Â  Â  Â  Â  Â  Â  state.selectedEngineer = null;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Handles hiring a new engineer at a specific skill level */
Â  Â  Â  Â  function attemptHire(skillLevel) {
Â  Â  Â  Â  Â  Â  const cost = HIRE_COSTS[skillLevel];
Â  Â  Â  Â  Â  Â  if (state.company.money < cost) {
Â  Â  Â  Â  Â  Â  Â  Â  alert(`You need $${cost} to hire a ${getEngineerTitle(skillLevel)}!`);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  state.company.money -= cost;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const newEngineer = {
Â  Â  Â  Â  Â  Â  Â  Â  id: state.nextEngineerId++,
Â  Â  Â  Â  Â  Â  Â  Â  name: getRandomName(),
Â  Â  Â  Â  Â  Â  Â  Â  skill: skillLevel,Â 
Â  Â  Â  Â  Â  Â  Â  Â  status: 'idle',
Â  Â  Â  Â  Â  Â  Â  Â  ticketsFixed: 0,
Â  Â  Â  Â  Â  Â  Â  Â  assignedTicket: null
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  state.engineers.push(newEngineer);
Â  Â  Â  Â  Â  Â  render();
Â  Â  Â  Â  }


Â  Â  Â  Â  /** Finalizes a ticket and calculates the variable payment */
Â  Â  Â  Â  function completeTicket(engineer, ticket) {
Â  Â  Â  Â  Â  Â  // 1. Pay the company based on complexity (e.g., 5-star is $100, 1-star is $20)
Â  Â  Â  Â  Â  Â  const payment = (ticket.complexity * TICKET_PAY_PER_STAR);
Â  Â  Â  Â  Â  Â  state.company.money += payment;
Â  Â  Â  Â  Â  Â  state.company.totalTicketsFixed++;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // 2. Update engineer stats
Â  Â  Â  Â  Â  Â  engineer.ticketsFixed++;
Â  Â  Â  Â  Â  Â  engineer.status = 'idle';
Â  Â  Â  Â  Â  Â  engineer.assignedTicket = null;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // 3. Check for promotion
Â  Â  Â  Â  Â  Â  if (engineer.ticketsFixed % PROMOTION_THRESHOLD === 0 && engineer.skill < 5) {
Â  Â  Â  Â  Â  Â  Â  Â  engineer.skill++;
Â  Â  Â  Â  Â  Â  Â  Â  alert(`${engineer.name} has been promoted to ${getEngineerTitle(engineer.skill)}! ðŸŽ‰`);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // 4. Update stats display
Â  Â  Â  Â  Â  Â  renderStats();
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /** The main game loop, runs every two seconds (representing a day/cycle) */
Â  Â  Â  Â  function gameLoop() {
Â  Â  Â  Â  Â  Â  let dailySalaryCost = 0;

Â  Â  Â  Â  Â  Â  // 1. Process Ticket Progress
Â  Â  Â  Â  Â  Â  state.inProgressTickets.forEach(ticket => {
Â  Â  Â  Â  Â  Â  Â  Â  const engineer = state.engineers.find(e => e.id === ticket.engineerId);
Â  Â  Â  Â  Â  Â  Â  Â  if (!engineer) return;Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Calculate progress based on engineer skill and ticket complexity
Â  Â  Â  Â  Â  Â  Â  Â  const progressThisTick = (engineer.skill * 5) / ticket.complexity;
Â  Â  Â  Â  Â  Â  Â  Â  ticket.progress += progressThisTick;

Â  Â  Â  Â  Â  Â  Â  Â  if (ticket.progress >= PROGRESS_TO_COMPLETE) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  completeTicket(engineer, ticket);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // 2. Deduct Daily Salaries (Operating Costs)
Â  Â  Â  Â  Â  Â  state.engineers.forEach(engineer => {
Â  Â  Â  Â  Â  Â  Â  Â  const salary = HOURLY_SALARIES[engineer.skill] || 5;
Â  Â  Â  Â  Â  Â  Â  Â  dailySalaryCost += salary;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  state.company.money -= dailySalaryCost;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // 3. Clean up and Render
Â  Â  Â  Â  Â  Â  state.inProgressTickets = state.inProgressTickets.filter(t => t.progress < PROGRESS_TO_COMPLETE);

Â  Â  Â  Â  Â  Â  renderProgress();
Â  Â  Â  Â  Â  Â  renderEngineers();Â 
Â  Â  Â  Â  Â  Â  renderStats();
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /** Resets and starts the ticket generation interval based on user selection */
Â  Â  Â  Â  function updateTicketGenerationSpeed(intervalMs) {
Â  Â  Â  Â  Â  Â  if (ticketInterval) {
Â  Â  Â  Â  Â  Â  Â  Â  clearInterval(ticketInterval);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  // Convert string value to integer for setInterval
Â  Â  Â  Â  Â  Â  ticketInterval = setInterval(generateTicket, parseInt(intervalMs, 10));
Â  Â  Â  Â  }


Â  Â  Â  Â  // --- RENDERING FUNCTIONS ---
Â  Â  Â  Â Â 
Â  Â  Â  Â  /** Renders everything */
Â  Â  Â  Â  function render() {
Â  Â  Â  Â  Â  Â  renderTickets();
Â  Â  Â  Â  Â  Â  renderEngineers();
Â  Â  Â  Â  Â  Â  renderProgress();
Â  Â  Â  Â  Â  Â  renderStats();
Â  Â  Â  Â  Â  Â  updateAssignmentButton();Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Updates the available ticket list */
Â  Â  Â  Â  function renderTickets() {
Â  Â  Â  Â  Â  Â  ticketListEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  if (state.tickets.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  ticketListEl.innerHTML = '<p>No new tickets. Generate one manually or wait for the automatic generator!</p>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  state.tickets.forEach(ticket => {
Â  Â  Â  Â  Â  Â  Â  Â  const selectedClass = ticket.id === state.selectedTicket ? 'selected' : '';
Â  Â  Â  Â  Â  Â  Â  Â  // Calculate reward based on new logic for display
Â  Â  Â  Â  Â  Â  Â  Â  const expectedPay = ticket.complexity * TICKET_PAY_PER_STAR; 
Â  Â  Â  Â  Â  Â  Â  Â  ticketListEl.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticket ${selectedClass}" onclick="selectTicket(${ticket.id})">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Ticket #${ticket.id}</strong>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Complexity: ${'â˜…'.repeat(ticket.complexity)}${'â˜†'.repeat(5 - ticket.complexity)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Reward: $${expectedPay}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Updates the engineer list */
Â  Â  Â  Â  function renderEngineers() {
Â  Â  Â  Â  Â  Â  engineerListEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  state.engineers.forEach(eng => {
Â  Â  Â  Â  Â  Â  Â  Â  // Use the same 'selected' class for a matching highlight
Â  Â  Â  Â  Â  Â  Â  Â  const selectedClass = eng.id === state.selectedEngineer ? 'selected' : ''; 
Â  Â  Â  Â  Â  Â  Â  Â  const fullName = `${eng.name} (${getEngineerTitle(eng.skill)})`;
Â  Â  Â  Â  Â  Â  Â  Â  const salaryCost = HOURLY_SALARIES[eng.skill] || '??';

Â  Â  Â  Â  Â  Â  Â  Â  engineerListEl.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="engineer ${eng.status} ${selectedClass}" onclick="selectEngineer(${eng.id})">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>${fullName}</strong>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Skill: ${'âœ¦'.repeat(eng.skill)}${'âœ§'.repeat(5 - eng.skill)} (Salary: $${salaryCost}/Day)</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Status: ${eng.status === 'idle' ? 'Idle ðŸŸ¢' : `Working on Ticket #${eng.assignedTicket} ðŸŸ¡`}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Tickets Fixed: ${eng.ticketsFixed}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Updates the in-progress list, which includes the graphical progress bar */
Â  Â  Â  Â  function renderProgress() {
Â  Â  Â  Â  Â  Â  progressListEl.innerHTML = '';
Â  Â  Â  Â  Â  Â  if (state.inProgressTickets.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  progressListEl.innerHTML = '<p>No tickets being worked on. Assign one now!</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  state.inProgressTickets.forEach(ticket => {
Â  Â  Â  Â  Â  Â  Â  Â  const engineer = state.engineers.find(e => e.id === ticket.engineerId);
Â  Â  Â  Â  Â  Â  Â  Â  const progressPercent = Math.min(100, (ticket.progress / PROGRESS_TO_COMPLETE) * 100);
Â  Â  Â  Â  Â  Â  Â  Â  progressListEl.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="ticket" data-ticket-id="${ticket.id}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Ticket #${ticket.id} (Complexity: ${ticket.complexity})</strong>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Assigned to: ${engineer ? engineer.name + ' (' + getEngineerTitle(engineer.skill) + ')' : '???'}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-bar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-fill" style="width: ${progressPercent}%"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>${Math.floor(progressPercent)}% complete</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  /** Updates the main company stats */
Â  Â  Â  Â  function renderStats() {
Â  Â  Â  Â  Â  Â  statsEl.innerHTML = `Money: $${Math.floor(state.company.money)} | Total Tickets Fixed: ${state.company.totalTicketsFixed}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- INITIALIZE ---
Â  Â  Â  Â  newTicketBtn.addEventListener('click', generateTicket);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Expose global functions for onclick in HTML
Â  Â  Â  Â  window.attemptHire = attemptHire;
Â  Â  Â  Â  window.selectTicket = selectTicket;
Â  Â  Â  Â  window.selectEngineer = selectEngineer;
Â  Â  Â  Â  window.assignSelectedWork = assignSelectedWork;Â 
Â  Â  Â  Â  window.updateTicketGenerationSpeed = updateTicketGenerationSpeed; // Expose new control function
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Start the game
Â  Â  Â  Â  state.company.money = 500;Â 
Â  Â  Â  Â  generateTicket();Â 
Â  Â  Â  Â  render();
Â  Â  Â  Â  
Â  Â  Â  Â  // Start Game Loop (2 seconds)
Â  Â  Â  Â  gameInterval = setInterval(gameLoop, 2000); 
Â  Â  Â  Â  
Â  Â  Â  Â  // Start automatic ticket generation with default (Medium: 15 seconds)
Â  Â  Â  Â  updateTicketGenerationSpeed(document.getElementById('ticket-speed-selector').value);
Â  Â  </script>
</body>
</html>
